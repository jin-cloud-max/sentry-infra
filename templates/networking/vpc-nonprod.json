{
  "AWSTemplateFormatVersion": "2010-09-09",
  "Description": "VPC for Sentry - Non-Production (dev/staging) - Complete network infrastructure with public/private subnets, NAT Gateway, and Internet Gateway",
  "Parameters": {
    "Environment": {
      "Type": "String",
      "Default": "dev",
      "AllowedValues": [
        "dev",
        "staging"
      ],
      "Description": "Environment name (dev or staging)"
    },
    "VpcCIDR": {
      "Type": "String",
      "Default": "172.22.0.0/16",
      "Description": "CIDR block for nonprod VPC",
      "AllowedPattern": "^172\\.22\\.0\\.0/16$",
      "ConstraintDescription": "Must be 172.22.0.0/16 for nonprod environments"
    },
    "AvailabilityZone1": {
      "Type": "AWS::EC2::AvailabilityZone::Name",
      "Description": "First Availability Zone"
    },
    "AvailabilityZone2": {
      "Type": "AWS::EC2::AvailabilityZone::Name",
      "Description": "Second Availability Zone (for staging multi-AZ)"
    },
    "EnableMultiAZ": {
      "Type": "String",
      "Default": "false",
      "AllowedValues": [
        "true",
        "false"
      ],
      "Description": "Enable Multi-AZ deployment (recommended for staging, optional for dev)"
    },
    "ProjectName": {
      "Type": "String",
      "Default": "sentry",
      "Description": "Project name for resource naming"
    },
    "EnableVPCFlowLogs": {
      "Type": "String",
      "Default": "false",
      "AllowedValues": [
        "true",
        "false"
      ],
      "Description": "Enable VPC Flow Logs for network traffic monitoring (set to true when needed)"
    }
  },
  "Metadata": {
    "AWS::CloudFormation::Interface": {
      "ParameterGroups": [
        {
          "Label": {
            "default": "Environment Configuration"
          },
          "Parameters": [
            "Environment",
            "ProjectName"
          ]
        },
        {
          "Label": {
            "default": "Network Configuration"
          },
          "Parameters": [
            "VpcCIDR",
            "AvailabilityZone1",
            "AvailabilityZone2",
            "EnableMultiAZ"
          ]
        }
      ],
      "ParameterLabels": {
        "Environment": {
          "default": "Environment Name"
        },
        "VpcCIDR": {
          "default": "VPC CIDR Block"
        },
        "AvailabilityZone1": {
          "default": "Primary AZ"
        },
        "AvailabilityZone2": {
          "default": "Secondary AZ"
        },
        "EnableMultiAZ": {
          "default": "Multi-AZ Deployment"
        },
        "ProjectName": {
          "default": "Project Name"
        }
      }
    }
  },
  "Conditions": {
    "IsMultiAZ": {
      "Fn::Equals": [
        {
          "Ref": "EnableMultiAZ"
        },
        "true"
      ]
    },
    "IsDev": {
      "Fn::Equals": [
        {
          "Ref": "Environment"
        },
        "dev"
      ]
    },
    "IsStaging": {
      "Fn::Equals": [
        {
          "Ref": "Environment"
        },
        "staging"
      ]
    },
    "EnableFlowLogs": {
      "Fn::Equals": [
        {
          "Ref": "EnableVPCFlowLogs"
        },
        "true"
      ]
    },
    "CreateSecondaryEIP": {
      "Fn::Or": [
        { "Condition": "IsMultiAZ" },
        { "Condition": "IsStaging" }
      ]
    }
  },
  "Resources": {
    "VPC": {
      "Type": "AWS::EC2::VPC",
      "Properties": {
        "CidrBlock": {
          "Ref": "VpcCIDR"
        },
        "EnableDnsHostnames": true,
        "EnableDnsSupport": true,
        "Tags": [
          {
            "Key": "Name",
            "Value": {
              "Fn::Sub": "${ProjectName}-vpc-${Environment}"
            }
          },
          {
            "Key": "Environment",
            "Value": {
              "Ref": "Environment"
            }
          },
          {
            "Key": "Project",
            "Value": {
              "Ref": "ProjectName"
            }
          },
          {
            "Key": "ManagedBy",
            "Value": "CloudFormation"
          },
          {
            "Key": "Purpose",
            "Value": "NonProduction VPC for OMS Spider"
          }
        ]
      }
    },
    "InternetGateway": {
      "Type": "AWS::EC2::InternetGateway",
      "Properties": {
        "Tags": [
          {
            "Key": "Name",
            "Value": {
              "Fn::Sub": "${ProjectName}-igw-${Environment}"
            }
          },
          {
            "Key": "Environment",
            "Value": {
              "Ref": "Environment"
            }
          },
          {
            "Key": "Project",
            "Value": {
              "Ref": "ProjectName"
            }
          },
          {
            "Key": "ManagedBy",
            "Value": "CloudFormation"
          }
        ]
      }
    },
    "AttachGateway": {
      "Type": "AWS::EC2::VPCGatewayAttachment",
      "Properties": {
        "VpcId": {
          "Ref": "VPC"
        },
        "InternetGatewayId": {
          "Ref": "InternetGateway"
        }
      }
    },
    "PublicSubnetAZ1": {
      "Type": "AWS::EC2::Subnet",
      "Properties": {
        "VpcId": {
          "Ref": "VPC"
        },
        "CidrBlock": {
          "Fn::Select": [
            0,
            {
              "Fn::Cidr": [
                {
                  "Ref": "VpcCIDR"
                },
                6,
                8
              ]
            }
          ]
        },
        "AvailabilityZone": {
          "Ref": "AvailabilityZone1"
        },
        "MapPublicIpOnLaunch": true,
        "Tags": [
          {
            "Key": "Name",
            "Value": {
              "Fn::Sub": "${ProjectName}-public-subnet-az1-${Environment}"
            }
          },
          {
            "Key": "Environment",
            "Value": {
              "Ref": "Environment"
            }
          },
          {
            "Key": "Project",
            "Value": {
              "Ref": "ProjectName"
            }
          },
          {
            "Key": "Type",
            "Value": "Public"
          },
          {
            "Key": "ManagedBy",
            "Value": "CloudFormation"
          }
        ]
      }
    },
    "PublicSubnetAZ2": {
      "Type": "AWS::EC2::Subnet",
      "Properties": {
        "VpcId": {
          "Ref": "VPC"
        },
        "CidrBlock": {
          "Fn::Select": [
            1,
            {
              "Fn::Cidr": [
                {
                  "Ref": "VpcCIDR"
                },
                6,
                8
              ]
            }
          ]
        },
        "AvailabilityZone": {
          "Ref": "AvailabilityZone2"
        },
        "MapPublicIpOnLaunch": true,
        "Tags": [
          {
            "Key": "Name",
            "Value": {
              "Fn::Sub": "${ProjectName}-public-subnet-az2-${Environment}"
            }
          },
          {
            "Key": "Environment",
            "Value": {
              "Ref": "Environment"
            }
          },
          {
            "Key": "Project",
            "Value": {
              "Ref": "ProjectName"
            }
          },
          {
            "Key": "Type",
            "Value": "Public"
          },
          {
            "Key": "ManagedBy",
            "Value": "CloudFormation"
          }
        ]
      }
    },
    "PrivateSubnetOMSAZ1": {
      "Type": "AWS::EC2::Subnet",
      "Properties": {
        "VpcId": {
          "Ref": "VPC"
        },
        "CidrBlock": {
          "Fn::Select": [
            2,
            {
              "Fn::Cidr": [
                {
                  "Ref": "VpcCIDR"
                },
                6,
                8
              ]
            }
          ]
        },
        "AvailabilityZone": {
          "Ref": "AvailabilityZone1"
        },
        "MapPublicIpOnLaunch": false,
        "Tags": [
          {
            "Key": "Name",
            "Value": {
              "Fn::Sub": "${ProjectName}-private-oms-subnet-az1-${Environment}"
            }
          },
          {
            "Key": "Environment",
            "Value": {
              "Ref": "Environment"
            }
          },
          {
            "Key": "Project",
            "Value": {
              "Ref": "ProjectName"
            }
          },
          {
            "Key": "Type",
            "Value": "Private"
          },
          {
            "Key": "Purpose",
            "Value": "OMS Cluster"
          },
          {
            "Key": "ManagedBy",
            "Value": "CloudFormation"
          }
        ]
      }
    },
    "PrivateSubnetOMSAZ2": {
      "Type": "AWS::EC2::Subnet",
      "Properties": {
        "VpcId": {
          "Ref": "VPC"
        },
        "CidrBlock": {
          "Fn::Select": [
            3,
            {
              "Fn::Cidr": [
                {
                  "Ref": "VpcCIDR"
                },
                6,
                8
              ]
            }
          ]
        },
        "AvailabilityZone": {
          "Ref": "AvailabilityZone2"
        },
        "MapPublicIpOnLaunch": false,
        "Tags": [
          {
            "Key": "Name",
            "Value": {
              "Fn::Sub": "${ProjectName}-private-oms-subnet-az2-${Environment}"
            }
          },
          {
            "Key": "Environment",
            "Value": {
              "Ref": "Environment"
            }
          },
          {
            "Key": "Project",
            "Value": {
              "Ref": "ProjectName"
            }
          },
          {
            "Key": "Type",
            "Value": "Private"
          },
          {
            "Key": "Purpose",
            "Value": "OMS Cluster"
          },
          {
            "Key": "ManagedBy",
            "Value": "CloudFormation"
          }
        ]
      }
    },
    "PrivateSubnetFrontendAZ1": {
      "Type": "AWS::EC2::Subnet",
      "Properties": {
        "VpcId": {
          "Ref": "VPC"
        },
        "CidrBlock": {
          "Fn::Select": [
            4,
            {
              "Fn::Cidr": [
                {
                  "Ref": "VpcCIDR"
                },
                6,
                8
              ]
            }
          ]
        },
        "AvailabilityZone": {
          "Ref": "AvailabilityZone1"
        },
        "MapPublicIpOnLaunch": false,
        "Tags": [
          {
            "Key": "Name",
            "Value": {
              "Fn::Sub": "${ProjectName}-private-frontend-subnet-az1-${Environment}"
            }
          },
          {
            "Key": "Environment",
            "Value": {
              "Ref": "Environment"
            }
          },
          {
            "Key": "Project",
            "Value": {
              "Ref": "ProjectName"
            }
          },
          {
            "Key": "Type",
            "Value": "Private"
          },
          {
            "Key": "Purpose",
            "Value": "Frontend/WebSocket Cluster"
          },
          {
            "Key": "ManagedBy",
            "Value": "CloudFormation"
          }
        ]
      }
    },
    "PrivateSubnetFrontendAZ2": {
      "Type": "AWS::EC2::Subnet",
      "Properties": {
        "VpcId": {
          "Ref": "VPC"
        },
        "CidrBlock": {
          "Fn::Select": [
            5,
            {
              "Fn::Cidr": [
                {
                  "Ref": "VpcCIDR"
                },
                6,
                8
              ]
            }
          ]
        },
        "AvailabilityZone": {
          "Ref": "AvailabilityZone2"
        },
        "MapPublicIpOnLaunch": false,
        "Tags": [
          {
            "Key": "Name",
            "Value": {
              "Fn::Sub": "${ProjectName}-private-frontend-subnet-az2-${Environment}"
            }
          },
          {
            "Key": "Environment",
            "Value": {
              "Ref": "Environment"
            }
          },
          {
            "Key": "Project",
            "Value": {
              "Ref": "ProjectName"
            }
          },
          {
            "Key": "Type",
            "Value": "Private"
          },
          {
            "Key": "Purpose",
            "Value": "Frontend/WebSocket Cluster"
          },
          {
            "Key": "ManagedBy",
            "Value": "CloudFormation"
          }
        ]
      }
    },
    "ElasticIPNAT1": {
      "Type": "AWS::EC2::EIP",
      "DependsOn": "AttachGateway",
      "Properties": {
        "Domain": "vpc",
        "Tags": [
          {
            "Key": "Name",
            "Value": {
              "Fn::Sub": "${ProjectName}-eip-nat1-${Environment}"
            }
          },
          {
            "Key": "Environment",
            "Value": {
              "Ref": "Environment"
            }
          },
          {
            "Key": "Project",
            "Value": {
              "Ref": "ProjectName"
            }
          },
          {
            "Key": "Purpose",
            "Value": "NAT Gateway - Outbound Internet Access IP 1"
          },
          {
            "Key": "ManagedBy",
            "Value": "CloudFormation"
          },
          {
            "Key": "Critical",
            "Value": "true"
          }
        ]
      }
    },
    "ElasticIPNAT1Secondary": {
      "Type": "AWS::EC2::EIP",
      "Condition": "CreateSecondaryEIP",
      "DependsOn": "AttachGateway",
      "Properties": {
        "Domain": "vpc",
        "Tags": [
          {
            "Key": "Name",
            "Value": {
              "Fn::Sub": "${ProjectName}-eip-nat1-secondary-${Environment}"
            }
          },
          {
            "Key": "Environment",
            "Value": {
              "Ref": "Environment"
            }
          },
          {
            "Key": "Project",
            "Value": {
              "Ref": "ProjectName"
            }
          },
          {
            "Key": "Purpose",
            "Value": "NAT Gateway AZ1 - Outbound Internet Access IP 2 (Secondary)"
          },
          {
            "Key": "ManagedBy",
            "Value": "CloudFormation"
          },
          {
            "Key": "Critical",
            "Value": "true"
          }
        ]
      }
    },
    "NATGatewayAZ1": {
      "Type": "AWS::EC2::NatGateway",
      "Properties": {
        "AllocationId": {
          "Fn::GetAtt": [
            "ElasticIPNAT1",
            "AllocationId"
          ]
        },
        "SubnetId": {
          "Ref": "PublicSubnetAZ1"
        },
        "SecondaryAllocationIds": {
          "Fn::If": [
            "CreateSecondaryEIP",
            [
              {
                "Fn::GetAtt": [
                  "ElasticIPNAT1Secondary",
                  "AllocationId"
                ]
              }
            ],
            { "Ref": "AWS::NoValue" }
          ]
        },
        "Tags": [
          {
            "Key": "Name",
            "Value": {
              "Fn::Sub": "${ProjectName}-nat-gateway-az1-${Environment}"
            }
          },
          {
            "Key": "Environment",
            "Value": {
              "Ref": "Environment"
            }
          },
          {
            "Key": "Project",
            "Value": {
              "Ref": "ProjectName"
            }
          },
          {
            "Key": "ManagedBy",
            "Value": "CloudFormation"
          }
        ]
      }
    },
    "PublicRouteTable": {
      "Type": "AWS::EC2::RouteTable",
      "Properties": {
        "VpcId": {
          "Ref": "VPC"
        },
        "Tags": [
          {
            "Key": "Name",
            "Value": {
              "Fn::Sub": "${ProjectName}-public-rt-${Environment}"
            }
          },
          {
            "Key": "Environment",
            "Value": {
              "Ref": "Environment"
            }
          },
          {
            "Key": "Project",
            "Value": {
              "Ref": "ProjectName"
            }
          },
          {
            "Key": "ManagedBy",
            "Value": "CloudFormation"
          }
        ]
      }
    },
    "PublicRoute": {
      "Type": "AWS::EC2::Route",
      "DependsOn": "AttachGateway",
      "Properties": {
        "RouteTableId": {
          "Ref": "PublicRouteTable"
        },
        "DestinationCidrBlock": "0.0.0.0/0",
        "GatewayId": {
          "Ref": "InternetGateway"
        }
      }
    },
    "PublicSubnetAZ1RouteTableAssociation": {
      "Type": "AWS::EC2::SubnetRouteTableAssociation",
      "Properties": {
        "SubnetId": {
          "Ref": "PublicSubnetAZ1"
        },
        "RouteTableId": {
          "Ref": "PublicRouteTable"
        }
      }
    },
    "PublicSubnetAZ2RouteTableAssociation": {
      "Type": "AWS::EC2::SubnetRouteTableAssociation",
      "Properties": {
        "SubnetId": {
          "Ref": "PublicSubnetAZ2"
        },
        "RouteTableId": {
          "Ref": "PublicRouteTable"
        }
      }
    },
    "PrivateRouteTableAZ1": {
      "Type": "AWS::EC2::RouteTable",
      "Properties": {
        "VpcId": {
          "Ref": "VPC"
        },
        "Tags": [
          {
            "Key": "Name",
            "Value": {
              "Fn::Sub": "${ProjectName}-private-rt-az1-${Environment}"
            }
          },
          {
            "Key": "Environment",
            "Value": {
              "Ref": "Environment"
            }
          },
          {
            "Key": "Project",
            "Value": {
              "Ref": "ProjectName"
            }
          },
          {
            "Key": "ManagedBy",
            "Value": "CloudFormation"
          }
        ]
      }
    },
    "PrivateRouteAZ1": {
      "Type": "AWS::EC2::Route",
      "Properties": {
        "RouteTableId": {
          "Ref": "PrivateRouteTableAZ1"
        },
        "DestinationCidrBlock": "0.0.0.0/0",
        "NatGatewayId": {
          "Ref": "NATGatewayAZ1"
        }
      }
    },
    "PrivateSubnetOMSAZ1RouteTableAssociation": {
      "Type": "AWS::EC2::SubnetRouteTableAssociation",
      "Properties": {
        "SubnetId": {
          "Ref": "PrivateSubnetOMSAZ1"
        },
        "RouteTableId": {
          "Ref": "PrivateRouteTableAZ1"
        }
      }
    },
    "PrivateSubnetFrontendAZ1RouteTableAssociation": {
      "Type": "AWS::EC2::SubnetRouteTableAssociation",
      "Properties": {
        "SubnetId": {
          "Ref": "PrivateSubnetFrontendAZ1"
        },
        "RouteTableId": {
          "Ref": "PrivateRouteTableAZ1"
        }
      }
    },
    "PrivateRouteTableAZ2": {
      "Type": "AWS::EC2::RouteTable",
      "Properties": {
        "VpcId": {
          "Ref": "VPC"
        },
        "Tags": [
          {
            "Key": "Name",
            "Value": {
              "Fn::Sub": "${ProjectName}-private-rt-az2-${Environment}"
            }
          },
          {
            "Key": "Environment",
            "Value": {
              "Ref": "Environment"
            }
          },
          {
            "Key": "Project",
            "Value": {
              "Ref": "ProjectName"
            }
          },
          {
            "Key": "ManagedBy",
            "Value": "CloudFormation"
          }
        ]
      }
    },
    "PrivateRouteAZ2": {
      "Type": "AWS::EC2::Route",
      "Properties": {
        "RouteTableId": {
          "Ref": "PrivateRouteTableAZ2"
        },
        "DestinationCidrBlock": "0.0.0.0/0",
        "NatGatewayId": {
          "Ref": "NATGatewayAZ1"
        }
      }
    },
    "PrivateSubnetOMSAZ2RouteTableAssociation": {
      "Type": "AWS::EC2::SubnetRouteTableAssociation",
      "Properties": {
        "SubnetId": {
          "Ref": "PrivateSubnetOMSAZ2"
        },
        "RouteTableId": {
          "Ref": "PrivateRouteTableAZ2"
        }
      }
    },
    "PrivateSubnetFrontendAZ2RouteTableAssociation": {
      "Type": "AWS::EC2::SubnetRouteTableAssociation",
      "Properties": {
        "SubnetId": {
          "Ref": "PrivateSubnetFrontendAZ2"
        },
        "RouteTableId": {
          "Ref": "PrivateRouteTableAZ2"
        }
      }
    },
    "VPCFlowLogRole": {
      "Type": "AWS::IAM::Role",
      "Condition": "EnableFlowLogs",
      "Properties": {
        "AssumeRolePolicyDocument": {
          "Version": "2012-10-17",
          "Statement": [
            {
              "Effect": "Allow",
              "Principal": {
                "Service": "vpc-flow-logs.amazonaws.com"
              },
              "Action": "sts:AssumeRole"
            }
          ]
        },
        "Policies": [
          {
            "PolicyName": "CloudWatchLogPolicy",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Effect": "Allow",
                  "Action": [
                    "logs:CreateLogGroup",
                    "logs:CreateLogStream",
                    "logs:PutLogEvents",
                    "logs:DescribeLogGroups",
                    "logs:DescribeLogStreams"
                  ],
                  "Resource": "*"
                }
              ]
            }
          }
        ],
        "Tags": [
          {
            "Key": "Name",
            "Value": {
              "Fn::Sub": "${ProjectName}-vpc-flow-log-role-${Environment}"
            }
          },
          {
            "Key": "Environment",
            "Value": {
              "Ref": "Environment"
            }
          },
          {
            "Key": "Project",
            "Value": {
              "Ref": "ProjectName"
            }
          }
        ]
      }
    },
    "VPCFlowLogGroup": {
      "Type": "AWS::Logs::LogGroup",
      "Condition": "EnableFlowLogs",
      "Properties": {
        "LogGroupName": {
          "Fn::Sub": "/aws/vpc/${ProjectName}-${Environment}"
        },
        "RetentionInDays": {
          "Fn::If": [
            "IsDev",
            7,
            14
          ]
        }
      }
    },
    "VPCFlowLog": {
      "Type": "AWS::EC2::FlowLog",
      "Condition": "EnableFlowLogs",
      "Properties": {
        "ResourceType": "VPC",
        "ResourceId": {
          "Ref": "VPC"
        },
        "TrafficType": "ALL",
        "LogDestinationType": "cloud-watch-logs",
        "LogGroupName": {
          "Ref": "VPCFlowLogGroup"
        },
        "DeliverLogsPermissionArn": {
          "Fn::GetAtt": [
            "VPCFlowLogRole",
            "Arn"
          ]
        },
        "Tags": [
          {
            "Key": "Name",
            "Value": {
              "Fn::Sub": "${ProjectName}-vpc-flow-log-${Environment}"
            }
          },
          {
            "Key": "Environment",
            "Value": {
              "Ref": "Environment"
            }
          },
          {
            "Key": "Project",
            "Value": {
              "Ref": "ProjectName"
            }
          }
        ]
      }
    }
  },
  "Outputs": {
    "VPCId": {
      "Description": "VPC ID",
      "Value": {
        "Ref": "VPC"
      },
      "Export": {
        "Name": {
          "Fn::Sub": "${AWS::StackName}-VPCId"
        }
      }
    },
    "VPCCidr": {
      "Description": "VPC CIDR Block",
      "Value": {
        "Ref": "VpcCIDR"
      },
      "Export": {
        "Name": {
          "Fn::Sub": "${AWS::StackName}-VPCCidr"
        }
      }
    },
    "PublicSubnetAZ1": {
      "Description": "Public Subnet AZ1 ID",
      "Value": {
        "Ref": "PublicSubnetAZ1"
      },
      "Export": {
        "Name": {
          "Fn::Sub": "${AWS::StackName}-PublicSubnetAZ1"
        }
      }
    },
    "PublicSubnetAZ2": {
      "Description": "Public Subnet AZ2 ID",
      "Value": {
        "Ref": "PublicSubnetAZ2"
      },
      "Export": {
        "Name": {
          "Fn::Sub": "${AWS::StackName}-PublicSubnetAZ2"
        }
      }
    },
    "PrivateSubnetOMSAZ1": {
      "Description": "Private OMS Subnet AZ1 ID",
      "Value": {
        "Ref": "PrivateSubnetOMSAZ1"
      },
      "Export": {
        "Name": {
          "Fn::Sub": "${AWS::StackName}-PrivateSubnetOMSAZ1"
        }
      }
    },
    "PrivateSubnetOMSAZ2": {
      "Description": "Private OMS Subnet AZ2 ID",
      "Value": {
        "Ref": "PrivateSubnetOMSAZ2"
      },
      "Export": {
        "Name": {
          "Fn::Sub": "${AWS::StackName}-PrivateSubnetOMSAZ2"
        }
      }
    },
    "PrivateSubnetFrontendAZ1": {
      "Description": "Private Frontend Subnet AZ1 ID",
      "Value": {
        "Ref": "PrivateSubnetFrontendAZ1"
      },
      "Export": {
        "Name": {
          "Fn::Sub": "${AWS::StackName}-PrivateSubnetFrontendAZ1"
        }
      }
    },
    "PrivateSubnetFrontendAZ2": {
      "Description": "Private Frontend Subnet AZ2 ID",
      "Value": {
        "Ref": "PrivateSubnetFrontendAZ2"
      },
      "Export": {
        "Name": {
          "Fn::Sub": "${AWS::StackName}-PrivateSubnetFrontendAZ2"
        }
      }
    },
    "NATGatewayAZ1": {
      "Description": "NAT Gateway AZ1 ID",
      "Value": {
        "Ref": "NATGatewayAZ1"
      },
      "Export": {
        "Name": {
          "Fn::Sub": "${AWS::StackName}-NATGatewayAZ1"
        }
      }
    },
    "ElasticIPNAT1": {
      "Description": "Elastic IP for NAT Gateway AZ1 (Primary) - Static outbound IP for internet access",
      "Value": {
        "Ref": "ElasticIPNAT1"
      },
      "Export": {
        "Name": {
          "Fn::Sub": "${AWS::StackName}-ElasticIPNAT1"
        }
      }
    },
    "ElasticIPNAT1Secondary": {
      "Condition": "CreateSecondaryEIP",
      "Description": "Elastic IP for NAT Gateway AZ1 (Secondary) - Static outbound IP for internet access",
      "Value": {
        "Ref": "ElasticIPNAT1Secondary"
      },
      "Export": {
        "Name": {
          "Fn::Sub": "${AWS::StackName}-ElasticIPNAT1Secondary"
        }
      }
    },
    "InternetGatewayId": {
      "Description": "Internet Gateway ID",
      "Value": {
        "Ref": "InternetGateway"
      },
      "Export": {
        "Name": {
          "Fn::Sub": "${AWS::StackName}-InternetGatewayId"
        }
      }
    }
  }
}